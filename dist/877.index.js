"use strict";(self.webpackChunk_explorables_into_the_dark=self.webpackChunk_explorables_into_the_dark||[]).push([[877,141,836,38],{504:(t,a,e)=>{e.d(a,{Z:()=>m}),e(4089);var s=e(6103),i=e(335),r=e(1897);const n=s.BYU().domain([0,360]).range([0,2*Math.PI]),o=s.BYU().range([0,360]).domain([0,2*Math.PI]),l=(t,a)=>{const e=t.x-a.x,s=t.y-a.y;return Math.sqrt(e*e+s*s)};var h=e(2489),d=e(5420);class c{constructor(t,a,e){this.params=e,this.id=t,this.x=Math.random()*e.L,this.y=Math.random()*e.L,this.theta=360*Math.random(),this.speed_var=1+Math.random()*e.speed_variation,this.ishidden=1==e.dark_zones&&(0,h.Z)(a,(t=>l(this,t)<t.r)).length?1:0,this.speed=this.adjust_speed(a)}adjust_angle(t){let a=[];var e,s,i,r;if(a=(0,h.Z)(t,(t=>l(this,t)<this.params.collision_radius&&t.id!=this.id)),a.length>0)e=this.x-(0,d.Z)(a,(t=>t.x)),s=this.y-(0,d.Z)(a,(t=>t.y));else{const a=(0,h.Z)(t,(t=>{let a=t.x-this.x,e=t.y-this.y;return t.r=Math.sqrt(a*a+e*e),t.r<this.params.attraction_radius&&t.id!=this.id})),l=(0,h.Z)(a,(t=>t.r<this.params.alignment_radius)),c=(0,h.Z)(a,(t=>t.r>this.params.alignment_radius));if(i=this.theta,r=this.theta,l.length>0&&this.params.collective_behavior){const t=(0,d.Z)(l,(t=>Math.cos(n(t.theta)))),a=(0,d.Z)(l,(t=>Math.sin(n(t.theta))));i=o(Math.atan2(a,t))}if(c.length>0&&this.params.collective_behavior){const t=(0,d.Z)(c,(t=>t.x)),a=(0,d.Z)(c,(t=>t.y));r=o(Math.atan2(a-this.y,t-this.x))}e=.5*(Math.cos(n(i))+Math.cos(n(r))),s=.5*(Math.sin(n(i))+Math.sin(n(r)))}const c=Math.cos(n(this.theta))+this.params.angular_increment*e,p=Math.sin(n(this.theta))+this.params.angular_increment*s,_=(self.t_dark+self.t_light)%3==0?this.params.wiggle:0;return o(Math.atan2(p,c))+(Math.random()-.5)*_}adjust_speed(t){return 1!=this.params.dark_zones?this.params.speed_in_the_light:(this.ishidden=(0,h.Z)(t,(t=>l(this,t)<t.r)).length?1:0,this.ishidden?this.params.speed_in_the_dark:this.params.speed_in_the_light)}set_new_pos(t,a){this.theta=this.adjust_angle(t),this.speed=this.adjust_speed(a);const e=n(this.theta);let s=this.params.dt*this.speed*this.speed_var*Math.cos(e),i=this.params.dt*this.speed*this.speed_var*Math.sin(e),r=this.x+s,l=this.y+i;(r<0||r>128)&&(s*=-1),(l<0||l>128)&&(i*=-1),this.x=this.x+s,this.y=this.y+i,this.theta=o(Math.atan2(i,s))}}class p{constructor(t,a){const e=Math.random()*Math.PI*2;this.id=t,this.x=Math.random()*a.L,this.y=Math.random()*a.L,this.vx=a.speed_hideouts*Math.cos(e),this.vy=a.speed_hideouts*Math.sin(e),this.r=a.size_hideouts,this.params=a}set_new_pos(){let t=this.params.dt*this.vx,a=this.params.dt*this.vy;t*=(this.id+1)/3,a*=(this.id+1)/3;let e=this.x+t,s=this.y+a;(e<0||e>this.params.L)&&(t*=-1,this.vx*=-1),(s<0||s>this.params.L)&&(a*=-1,this.vy*=-1),this.x=this.x+t,this.y=this.y+a}}var _=e(9400),g=e(7467);e(1263);const u=s.BYU().domain([0,128]),y=s.BYU().domain([0,128]);class m{constructor(t){this.params=t;const a=(t=>{const a=s.Ys("#sim").classed(t.container_class,!0),e=a.append("div").attr("id","display").attr("class","display-panel").classed(t.display_class,!0).append("svg").attr("viewBox",`0 0 ${t.display_size.width} ${t.display_size.height}`).style("width","100%"),i=a.append("div").attr("id","controls").attr("class","control-panel").classed(t.controls_class,!0);i.append("div").attr("id","control-text").style("width","500px");const r=i.append("svg").attr("viewBox",`0 0 ${t.controls_size.width} ${t.controls_size.height}`);return t.controls_border&&r.append("rect").attr("class","border").attr("width",t.controls_size.width).attr("height",t.controls_size.height),t.display_border&&e.append("rect").attr("class","border").attr("width",t.display_size.width).attr("height",t.display_size.height),{display:e,controls:r}})(t);this.display=a.display,this.controls=a.controls,this.agents=[],this.hideouts=[],this.initialize(this.params),this.timer={},(t=>{const a=t.params,e=g.LI().actions(["play","pause"]),i=[e];let r;t.params.reset_enabled&&(r=g.LI().actions(["rewind"]),i.push(r),r.update((()=>{t.initialize(t.params)}))),e.size(a.widgets.playbutton_size),s.Ys("#controls").select("svg").selectAll(".button").data(i).enter().append(g.Zg).attr("transform","translate(250, 250)"),e.update((()=>{1==e.value()?t.timer=s.FG_((()=>t.go()),a.simulation.delay):t.timer.stop()}))})(this)}initialize(t){this.hideouts=(0,i.Z)((0,r.Z)(t.number_hideouts),(a=>new p(a,t))),this.agents=(0,i.Z)((0,r.Z)(t.N),(a=>new c(a,this.hideouts,t)));const a=t.display_size.width,e=t.display_size.height;u.range([0,a]),y.range([0,e]),this.display.select("#origin").remove();const n=this.display.append("g").attr("id","origin");var o;n.selectAll(".hideout").data(this.hideouts).enter().append("circle").attr("class","hideout").attr("r",(function(t){return u(t.r)})).attr("cx",(t=>u(t.x))).attr("cy",(t=>y(t.y))).style("fill",t.simulation.hideout_color).style("opacity",t.dark_zones?1:0),n.selectAll(".agent").data(this.agents).enter().append("g").attr("class","agent").attr("transform",(t=>`translate(${u(t.x)}, ${y(t.y)})rotate(${t.theta})`)).append("path").attr("d",(o=t.agentsize,s.jvg().x((t=>o*t.x)).y((t=>o*t.y))((0,i.Z)((0,r.Z)(30),(t=>({x:-2*Math.cos(t/30*Math.PI*2),y:Math.sin(t/30*Math.PI*2)*Math.pow(Math.sin(t/30/2*Math.PI*2),6)})))))).attr("fill",((a,e)=>t.colors[e%t.colors.length]))}go(){(0,_.Z)(this.hideouts,(t=>t.set_new_pos())),(0,_.Z)(this.agents,(t=>t.set_new_pos(this.agents,this.hideouts))),this.display.selectAll(".hideout").attr("cx",(t=>u(t.x))).attr("cy",(t=>y(t.y))),this.display.selectAll(".agent").attr("transform",(t=>"translate("+u(t.x)+","+y(t.y)+")rotate("+t.theta+")"))}}},1877:(t,a,e)=>{e.r(a),e.d(a,{default:()=>d});var s=e(504),i=e(4038),r=e(141),n=e(6103),o=e(1263),l=e(1836);class h extends s.Z{constructor(){const t=o.Z.mode5;super(t),this.params=t,this.total=0,this.mean_hidden=0,this.best_score=0,this.data=new Array(1e3).fill(0),n.Ys("#controls").style("height","570px").select("svg").style("height","420").style("width","450px").attr("viewBox","0 0 450 420"),(0,i.default)(this.params),(0,r.setup_chart)(this.data),(0,l.default)()}initialize(t){this.total=0,this.mean_hidden=0,this.best_score=0,this.data=new Array(1e3).fill(0),n.Ys("#line").datum(this.data),super.initialize(t)}go(){super.go();const t=this.agents.reduce(((t,a)=>t+a.ishidden),0)/this.params.N;this.total+=Math.min(.99,t),this.total-=this.data[0],this.mean_hidden=this.total/1e3,(0,r.chart_tick)(this.data,t,this.mean_hidden,this.best_score),this.best_score=Math.max(this.best_score,this.mean_hidden)}}function d(){return document.getElementById("sim").innerHTML="",new h}},141:(t,a,e)=>{e.r(a),e.d(a,{chart_tick:()=>p,setup_chart:()=>c});var s=e(6103);const i=s.WUZ(".0%"),r={top:10,right:20,bottom:20,left:40},n=420-r.left-r.right,o=150-r.top-r.bottom,l=s.BYU().domain([0,999]).range([0,n]),h=s.BYU().domain([0,1]).range([o,0]),d=s.jvg().x((function(t,a){return l(a)})).y((function(t,a){return h(t)})).curve(s.c_6);function c(t){const a=s.Ys("#control-text").append("svg").attr("id","#chart").attr("viewBox","0 0 500 160"),e=a.append("g").attr("transform","translate("+r.left+","+r.top+")");e.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",n).attr("height",o),e.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+h(0)+")").call(s.LLu(l).ticks(0)),e.append("g").attr("class","axis axis--y").call(s.y4O(h).ticks(5).tickFormat(s.WUZ(".0%"))),e.append("g").attr("clip-path","url(#clip)").append("path").datum(t).attr("id","line").transition().duration(500).ease(s.Nyw),e.append("line").attr("id","avg-line").style("stroke-width",1).style("stroke","darkgray").attr("x1",1).attr("y1",h(0)).attr("x2",n).attr("y2",h(0)),e.append("line").attr("id","best-line").style("stroke-width",1).style("stroke","crimson").attr("x1",1).attr("y1",h(0)).attr("x2",n).attr("y2",h(0)),a.append("text").attr("id","highscore-label").attr("x",50).attr("y",150).text("High Score: "),a.append("text").attr("id","highscore").attr("x",140).attr("y",150).text("0%")}function p(t,a,e,r){t.push(a),s.Ys("#line").attr("d",d).attr("transform",null).transition().attr("transform","translate("+l(-1)+",0)"),e>r&&(s.Ys("#best-line").attr("y1",h(e)).attr("y2",h(e)),s.Ys("#highscore").text(i(e.toFixed(2)))),e>1&&console.log(e),s.Ys("#avg-line").attr("y1",h(e)).attr("y2",h(e)),t.shift()}},1836:(t,a,e)=>{function s(){const t=document.getElementById("sim"),a=document.createElement("div");a.id="modal";const e=t.appendChild(a);e.innerHTML="\n    <div class=\"modal-content\">\n      <span class=\"close\">&times;</span>\n      <h1 style='color:rgb(38, 34, 144)'>Who's Afraid of the <s>Dark</s> Light?</h1>\n      <p>Now that you understand this simulation and have a hypothesis       about how variable(s) control how the school finds its way to       the dark and stays there, let's put it to the test.</p> \n      <p>Run an experiment. A graph will show you the average       proportion of the time fish spent in the light versus the dark.       Every fraction of a second, the proportion of fish in the       dark/light is calculated. The average of this proportion over       the last several seconds will show up as a horizontal gray       line in the plot.</p>\n      <p>Use this curve to guide your exploration of Relative Speed,       Alignment, and Attraction Radius. </p>\n      <p>Run as many trials as you like and try to maximize Proportion       in the Dark! <b>Stay alive!</b></p>\n    </div>",document.getElementsByClassName("close")[0].onclick=function(){e.style.display="none"},window.onclick=function(t){t.target==e&&(e.style.display="none")}}e.r(a),e.d(a,{default:()=>s})},4038:(t,a,e)=>{e.r(a),e.d(a,{default:()=>r});var s=e(6103),i=e(2582);const r=t=>{const a=90,e=(s.Ys("#controls").select("svg").select("g:nth-child(1)").attr("transform",`translate(165, ${t.widgets.playbutton_size/2+3})`),s.Ys("#controls").select("svg").select("g:nth-child(2)").attr("transform",`translate(245, ${t.widgets.playbutton_size/2+3})`),s.Ys("#controls").select("svg").append("g").attr("id","sliders").attr("transform","translate(10, 100)")),r=["Much Greater","Equal","Much Greater"];for(let t=0;t<3;t++){e.append("rect").attr("width",410).attr("height",30).attr("x",-10).attr("y",a*t+10).attr("fill","url(#svgGradient)");for(let s=0;s<5;s++)e.append("line").style("stroke-width",1).style("stroke","darkgray").attr("x1",410*s/4-10).attr("y1",a*t+40).attr("x2",410*s/4-10).attr("y2",a*t+50);e.append("text").text("In the Light").attr("x",0).attr("y",a*t+30).attr("text-anchor","start"),e.append("text").text("In the Dark").attr("x",390).attr("y",a*t+30).attr("text-anchor","end"),e.append("text").text(r[0]).attr("x",10).attr("y",a*t+62).style("font-size","12px").attr("text-anchor","start"),e.append("text").text(r[1]).attr("x",195).attr("y",a*t+62).style("font-size","12px").attr("text-anchor","middle"),e.append("text").text(r[2]).attr("x",370).attr("y",a*t+62).style("font-size","12px").attr("text-anchor","end");const s=["Relative Speed","Relative Alignment Radius","Relative Attraction Radius"];e.append("text").text(s[0]).attr("x",195).attr("text-anchor","middle"),e.append("text").text(s[1]).attr("x",195).attr("y",a).attr("text-anchor","middle"),e.append("text").text(s[2]).attr("x",195).attr("y",180).attr("text-anchor","middle")}var n=e.append("defs").append("linearGradient").attr("id","svgGradient").attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","100%");n.append("stop").attr("class","start").attr("offset","0%").attr("stop-color","white").attr("stop-opacity",0),n.append("stop").attr("class","end").attr("offset","100%").attr("stop-color","black").attr("stop-opacity",1);const o=(0,i.Ao)().min(0).max(10).step(1).width(390).value(5).displayValue(!1).tickValues([]).on("onchange",(a=>{t.speed_in_the_light=1.5-a/10,t.speed_in_the_dark=.5+a/10})),l=(e.append("g").call(o).attr("transform","translate(0, 40)"),(0,i.Ao)().min(0).max(10).step(1).width(390).tickValues([]).value(5).displayValue(!1).on("onchange",(a=>{a<=4?(t.alignment_radius=4,t.dark_al=0+4*a/5):a>=6?(t.alignment_radius=4-4*(a-5)/5,t.dark_al=4):(t.alignment_radius=4,t.dark_al=4)}))),h=(e.append("g").call(l).attr("transform","translate(0, 130)"),80),d=(0,i.Ao)().min(0).max(10).step(1).width(390).tickValues([]).value(5).displayValue(!1).on("onchange",(a=>{a<=4?(t.attraction_radius=h,t.dark_ar=5+75*a/5):a>=6?(t.attraction_radius=h-75*(a-5)/5,t.dark_ar=h):(t.attraction_radius=h,t.dark_ar=h)}));e.append("g").call(d).attr("transform","translate(0, 220)")}},1263:(t,a,e)=>{e.d(a,{Z:()=>s});const s={basic:{N:3,colors:["rgb(38, 34, 144)"],L:128,agentsize:15,dt:1,speed_variation:.5,angular_increment:.2,collision_radius:1,number_hideouts:0,speed_hideouts:.075,size_hideouts:30,speed_in_the_light:.5,speed_in_the_dark:.1,alignment_radius:0,attraction_radius:0,wiggle:0,collective_behavior:!1,dark_zones:!1,widgets:{toggle_anchor:{x:7,y:1.5},toggle_label_pos:"right",toggle_gap:1.5,playbutton_size:60,playbutton_anchor:{x:5.5,y:5.5},backbutton_anchor:{x:4,y:4.5},resetbutton_anchor:{x:2,y:4.5}},simulation:{delay:0,hideout_color:"rgb(80,80,80)"},controls_border:!1,display_border:!0,controls_grid:{nx:12,ny:12},display_size:{width:500,height:500},controls_size:{width:480,height:480},display_class:"fl w-100 w-50-ns pa2 ph3-ns",controls_class:"fl w-100 w-50-ns pa2 ph3-ns",container_class:"mw8 center cf"},mode1:{N:3,colors:["rgb(190, 39, 113)","rgb(97, 171, 241)","rgb(38, 34, 144)"],L:128,agentsize:30,dt:1,speed_variation:.5,angular_increment:.2,collision_radius:1,number_hideouts:0,speed_hideouts:.075,size_hideouts:30,speed_in_the_light:.5,speed_in_the_dark:.1,alignment_radius:0,attraction_radius:0,wiggle:0,collective_behavior:!1,dark_zones:!1,widgets:{toggle_anchor:{x:7,y:1.5},toggle_label_pos:"right",toggle_gap:1.5,playbutton_size:60,playbutton_anchor:{x:5.5,y:5.5},backbutton_anchor:{x:4,y:4.5},resetbutton_anchor:{x:2,y:4.5}},simulation:{delay:0,hideout_color:"rgb(80,80,80)"},controls_border:!1,display_border:!0,controls_grid:{nx:12,ny:12},display_size:{width:500,height:500},controls_size:{width:600,height:480},display_class:"fl w-100 w-50-ns pa2 ph3-ns",controls_class:"fl w-100 w-50-ns pa2 ph3-ns",container_class:"mw8 center cf"},mode2:{N:1,colors:["rgb(38, 34, 144)"],L:128,agentsize:15,dt:1,speed_variation:.5,angular_increment:.2,number_hideouts:0,speed_hideouts:.075,size_hideouts:30,speed_in_the_light:1,speed_in_the_dark:.1,alignment_radius:0,attraction_radius:10,wiggle:0,collective_behavior:!0,dark_zones:!1,text_pos:{x:0,y:40},widgets:{toggle_anchor:{x:7,y:1.5},toggle_label_pos:"right",toggle_gap:1.5,playbutton_size:60,playbutton_anchor:{x:0,y:0},backbutton_anchor:{x:4,y:4.5},resetbutton_anchor:{x:2,y:4.5}},simulation:{delay:0,hideout_color:"rgb(80,80,80)"},display_type:"svg",debug:!1,controls_border:!1,display_border:!0,debug_lattice:"debug-grid-16",controls_grid:{nx:12,ny:12},display_size:{width:500,height:500},controls_size:{width:600,height:650},display_class:"fl w-100 w-50-ns pa2 ph3-ns",controls_class:"fl w-100 w-50-ns pa2 ph3-ns",container_class:"mw8 center cf"},mode3:{N:30,colors:["rgb(38, 34, 144)"],L:128,agentsize:15,dt:1,speed_variation:.5,angular_increment:.2,collission_radius:1,speed_in_the_light:1,speed_in_the_dark:.1,alignment_radius:2,attraction_radius:10,wiggle:0,collective_behavior:!0,dark_zones:!1,text_pos:{x:0,y:40},widgets:{toggle_anchor:{x:7,y:1.5},toggle_label_pos:"right",toggle_gap:1.5,playbutton_size:60,playbutton_anchor:{x:0,y:0},backbutton_anchor:{x:4,y:4.5},resetbutton_anchor:{x:2,y:4.5}},simulation:{delay:0,hideout_color:"rgb(80,80,80)"},display_type:"svg",debug:!1,controls_border:!1,display_border:!0,debug_lattice:"debug-grid-16",controls_grid:{nx:12,ny:12},display_size:{width:500,height:500},controls_size:{width:600,height:600},display_class:"fl w-100 w-50-ns pa2 ph3-ns",controls_class:"fl w-100 w-50-ns pa2 ph3-ns",container_class:"mw8 center cf"},mode4:{N:30,colors:["rgb(38, 34, 144)"],L:128,agentsize:15,dt:1,speed_variation:.5,angular_increment:.2,collission_radius:1,number_hideouts:3,speed_hideouts:.2,size_hideouts:30,speed_in_the_light:1,speed_in_the_dark:1,alignment_radius:2.25,dark_al:2.25,attraction_radius:20,dark_ar:20,wiggle:20,collective_behavior:!0,dark_zones:!0,widgets:{toggle_anchor:{x:7,y:1.5},toggle_label_pos:"right",toggle_gap:1.5,playbutton_size:60,playbutton_anchor:{x:0,y:0},backbutton_anchor:{x:4,y:4.5},resetbutton_anchor:{x:2,y:4.5}},simulation:{delay:0,hideout_color:"rgb(80,80,80)"},controls_border:!1,display_border:!0,controls_grid:{nx:12,ny:12},display_size:{width:500,height:500},controls_size:{width:600,height:600},display_class:"fl w-100 w-50-ns pa2 ph3-ns",controls_class:"fl w-100 w-50-ns pa2 ph3-ns",container_class:"mw8 center cf"},mode5:{N:30,colors:["rgb(38, 34, 144)"],L:128,agentsize:15,dt:1,speed_variation:.5,angular_increment:.2,collission_radius:1,number_hideouts:3,speed_hideouts:.2,size_hideouts:30,speed_in_the_light:1,speed_in_the_dark:1,alignment_radius:2.25,dark_al:2.25,attraction_radius:20,dark_ar:20,wiggle:20,collective_behavior:!0,dark_zones:!0,text_pos:{x:0,y:40},widgets:{toggle_anchor:{x:7,y:1.5},toggle_label_pos:"right",toggle_gap:1.5,playbutton_size:60,playbutton_anchor:{x:0,y:0},backbutton_anchor:{x:4,y:4.5},resetbutton_anchor:{x:2,y:4.5}},simulation:{delay:0,hideout_color:"rgb(80,80,80)"},controls_border:!1,display_border:!0,controls_grid:{nx:12,ny:12},display_size:{width:500,height:500},controls_size:{width:600,height:600},display_class:"fl w-100 w-50-ns pa2 ph3-ns",controls_class:"fl w-100 w-50-ns pa2 ph3-ns",container_class:"mw8 center cf",reset_enabled:!0}}}}]);