"use strict";(self.webpackChunk_explorables_into_the_dark=self.webpackChunk_explorables_into_the_dark||[]).push([[877,141,836,38],{1877:(t,a,e)=>{e.r(a),e.d(a,{default:()=>p});var r=e(504),s=e(4038),i=e(141),n=e(6103),l=e(1263),d=e(1836);class o extends r.Z{constructor(){const t=l.Z.mode5;t.alignment_radius=t.al_def,t.dark_al=t.al_def,t.attraction_radius=t.ar_def,t.dark_ar=t.ar_def,t.speed_in_the_dark=t.speed_def,t.speed_in_the_light=t.speed_def,super(t),this.params=t,this.params=t,this.total=0,this.mean_hidden=0,this.best_score=0,this.data=new Array(1e3).fill(0),this.ticks=1,this.avg_ar=2,this.avg_al=1,this.avg_s=2,this.avg_ar_slider=2,this.avg_al_slider=2,this.avg_s_slider=2,n.Ys("#controls").style("height","570px").select("svg").style("height","420").style("width","450px").attr("viewBox","0 0 450 420"),this.sliders=(0,s.default)(this.params),(0,i.setup_chart)(this.data),(0,d.default)()}initialize(t){this.total=0,this.mean_hidden=0,this.best_score=0,this.data=new Array(1e3).fill(0),n.Ys("#line").datum(this.data),super.initialize(t)}go(){super.go();const t=this.agents.reduce(((t,a)=>t+a.ishidden),0)/this.params.N;this.total+=Math.min(.99,t),this.total-=this.data[0],this.mean_hidden=this.total/1e3,(0,i.chart_tick)(this,t),this.best_score=Math.max(this.best_score,this.mean_hidden)}}function p(){return document.getElementById("sim").innerHTML="",new o}},141:(t,a,e)=>{e.r(a),e.d(a,{chart_tick:()=>_,setup_chart:()=>h});var r=e(6103);const s=r.WUZ(".0%"),i={top:10,right:20,bottom:20,left:40},n=420-i.left-i.right,l=150-i.top-i.bottom,d=r.BYU().domain([0,999]).range([0,n]),o=r.BYU().domain([0,1]).range([l,0]),p=r.jvg().x((function(t,a){return d(a)})).y((function(t,a){return o(t)})).curve(r.c_6);function h(t){const a=r.Ys("#control-text").append("svg").attr("id","#chart").attr("viewBox","0 0 500 160"),e=a.append("g").attr("transform","translate("+i.left+","+i.top+")");e.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",n).attr("height",l),e.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+o(0)+")").call(r.LLu(d).ticks(0)),e.append("g").attr("class","axis axis--y").call(r.y4O(o).ticks(5).tickFormat(r.WUZ(".0%"))),e.append("g").attr("clip-path","url(#clip)").append("path").datum(t).attr("id","line").transition().duration(500).ease(r.Nyw),e.append("line").attr("id","avg-line").style("stroke-width",1).style("stroke","darkgray").attr("x1",1).attr("y1",o(0)).attr("x2",n).attr("y2",o(0)),e.append("line").attr("id","best-line").style("stroke-width",1).style("stroke","crimson").attr("x1",1).attr("y1",o(0)).attr("x2",n).attr("y2",o(0)),a.append("text").attr("id","high-label").attr("x",275).attr("y",150).text("High: "),a.append("text").attr("id","high").attr("x",320).attr("y",150).text("0%"),a.append("text").attr("id","running-avg-label").attr("x",160).attr("y",150).text("Average:"),a.append("text").attr("id","running-avg").attr("x",225).attr("y",150).text("0%"),a.append("text").attr("id","current-label").attr("x",50).attr("y",150).text("Current:"),a.append("text").attr("id","current").attr("x",110).attr("y",150).text("0%")}const c=(t,a,e)=>(t*(e-1)+a)/e,x=r.BYU().domain([0,4]).range([-1,1]);function _(t,a){const e=t.mean_hidden,i=t.best_score,n=t.data;t.ticks+=1,t.avg_s=c(t.avg_s,t.sliders.speed_slider.value(),t.ticks),t.avg_ar=c(t.avg_ar,t.sliders.ar_slider.value(),t.ticks),t.avg_al=c(t.avg_al,t.sliders.al_slider.value(),t.ticks),t.avg_ar_slider=x(t.avg_ar),t.avg_al_slider=x(2*t.avg_al),t.avg_s_slider=x(t.avg_s),console.log(t.avg_s_slider),n.push(a),r.Ys("#line").attr("d",p).attr("transform",null).transition().attr("transform","translate("+d(-1)+",0)"),e>i&&(r.Ys("#best-line").attr("y1",o(e)).attr("y2",o(e)),r.Ys("#high").text(s(e.toFixed(2)))),r.Ys("#avg-line").attr("y1",o(e)).attr("y2",o(e)),r.Ys("#running-avg").text(s(e.toFixed(2))),r.Ys("#current").text(s(a.toFixed(2))),n.shift()}},1836:(t,a,e)=>{function r(){const t=document.getElementById("sim"),a=document.createElement("div");a.id="modal";const e=t.appendChild(a);e.innerHTML="\n    <div class=\"modal-content\">\n      <span class=\"close\">&times;</span>\n      <h1 style='color:rgb(38, 34, 144)'>Who's Afraid of the <s>Dark</s> Light?</h1>\n      <p>Now that you understand this simulation and have a hypothesis       about how variable(s) control how the school finds its way to       the dark and stays there, let's put it to the test.</p> \n      <p>Run an experiment. A graph will show you the average       proportion of the time fish spent in the light versus the dark.       Every fraction of a second, the proportion of fish in the       dark/light is calculated. The average of this proportion over       the last several seconds will show up as a horizontal gray       line in the plot.</p>\n      <p>Use this curve to guide your exploration of Relative Speed,       Alignment, and Attraction Radius. </p>\n      <p>Run as many trials as you like and try to maximize Proportion       in the Dark! <b>Stay alive!</b></p>\n    </div>",document.getElementsByClassName("close")[0].onclick=function(){e.style.display="none"},window.onclick=function(t){t.target==e&&(e.style.display="none")}}e.r(a),e.d(a,{default:()=>r})},4038:(t,a,e)=>{e.r(a),e.d(a,{default:()=>i});var r=e(6103),s=e(2582);const i=t=>{const a=100,e=(r.Ys("#controls").select("svg").select("g:nth-child(1)").attr("transform",`translate(165, ${t.widgets.playbutton_size/2+3})`),r.Ys("#controls").select("svg").select("g:nth-child(2)").attr("transform",`translate(245, ${t.widgets.playbutton_size/2+3})`),r.Ys("#controls").select("svg").append("g").attr("id","sliders").attr("transform","translate(10, 100)")),i=["Much Greater","Equal","Much Greater"];for(let t=0;t<3;t++){e.append("rect").attr("width",410).attr("height",40).attr("x",-10).attr("y",a*t).attr("fill","url(#svgGradient)");for(let r=0;r<5;r++)e.append("line").style("stroke-width",1).style("stroke","darkgray").attr("x1",390*r/4).attr("y1",a*t+40).attr("x2",390*r/4).attr("y2",a*t+50);e.append("text").text("Light").attr("x",0).attr("y",a*t+18).attr("text-anchor","start"),e.append("text").text("Dark").attr("x",392).attr("y",a*t+18).attr("text-anchor","end").attr("fill","white"),e.append("text").text(i[0]).attr("x",10).attr("y",a*t+65).style("font-size","12px").attr("text-anchor","start"),e.append("text").text(i[1]).attr("x",195).attr("y",a*t+65).style("font-size","12px").attr("text-anchor","middle"),e.append("text").text(i[2]).attr("x",380).attr("y",a*t+65).style("font-size","12px").attr("text-anchor","end"),e.append("text").text("-1").attr("x",-5).attr("y",a*t+33).style("font-size","12px").attr("text-anchor","start"),e.append("text").text("-0.5").attr("x",95.5).attr("y",a*t+33).style("font-size","12px").attr("text-anchor","middle").attr("fill","black"),e.append("text").text("0").attr("x",196).attr("y",a*t+33).style("font-size","12px").attr("text-anchor","middle").attr("fill","black"),e.append("text").text("+0.5").attr("x",301.5).attr("y",a*t+33).style("font-size","12px").attr("text-anchor","end").attr("fill","white"),e.append("text").text("+1").attr("x",394).attr("y",a*t+33).style("font-size","12px").attr("text-anchor","end").attr("fill","white");const r=["Relative Speed","Relative Alignment Radius","Relative Attraction Radius"];e.append("text").text(r[0]).attr("x",195).attr("y",-5).attr("text-anchor","middle"),e.append("text").text(r[1]).attr("x",195).attr("y",95).attr("text-anchor","middle"),e.append("text").text(r[2]).attr("x",195).attr("y",195).attr("text-anchor","middle")}var n=e.append("defs").append("linearGradient").attr("id","svgGradient").attr("x1","0%").attr("x2","100%").attr("y1","100%").attr("y2","100%");n.append("stop").attr("class","start").attr("offset","0%").attr("stop-color","white").attr("stop-opacity",0),n.append("stop").attr("class","end").attr("offset","100%").attr("stop-color","black").attr("stop-opacity",1);const l=(0,s.Ao)().min(0).max(4).step(1).width(390).value(2).displayValue(!1).tickValues([]).on("onchange",(a=>{t.speed_in_the_light=t.s_max-a/4,t.speed_in_the_dark=t.s_min+a/4})),d=(e.append("g").call(l).attr("transform","translate(0, 40)"),(0,s.Ao)().min(0).max(2).step(.5).width(390).tickValues([]).value(1).displayValue(!1).on("onchange",(a=>{a<1?(t.alignment_radius=t.al_max,t.dark_al=t.al_min+(t.al_max-t.al_min)*((a-1)/1)):a>1?(t.alignment_radius=t.al_max-(t.al_max-t.al_min)*((a-1)/1),t.dark_al=t.al_max):(t.alignment_radius=t.al_max,t.dark_al=t.al_max)}))),o=(e.append("g").call(d).attr("transform","translate(0, 140)"),(0,s.Ao)().min(0).max(4).step(1).width(390).tickValues([]).value(2).displayValue(!1).on("onchange",(a=>{a<=2?(t.attraction_radius=t.ar_max,t.dark_ar=t.ar_min+(t.ar_max-t.ar_min)*(a/2)):a>=2?(t.attraction_radius=t.ar_max-(t.ar_max-t.ar_min)*((a-2)/2),t.dark_ar=t.ar_max):(t.attraction_radius=t.ar_max,t.dark_ar=t.ar_max)})));return e.append("g").call(o).attr("transform","translate(0, 240)"),{speed_slider:l,ar_slider:o,al_slider:d}}}}]);